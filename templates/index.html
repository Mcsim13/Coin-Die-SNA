<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coin Die SNA</title>

    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
        integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <script src="{{ url_for('static', filename='fdgraph.js') }}"></script>

    <script>
        $(() => {
            let appearance = "dark";
            $("button#appearance").on("click", () => {
                if (appearance === "dark") {
                    $("body").addClass("white");
                    $("button#appearance").html("Dark mode");
                    appearance = "light";
                } else {
                    $("body").removeClass("white");
                    $("button#appearance").html("Light mode");
                    appearance = "dark";
                }
            })

            $("button.tab").on("click", (e) => {
                $("button.tab").removeClass("active");
                $(e.currentTarget).addClass("active");
            })

            $("#close-inspector").on("click", () => {
                $("#inspector-container").hide();
            })
        });

        let openInspector = (id) => {
            $("#inspector-container").show();

            $("#inspector-heading").html(id)
        }

        let getRequest = (url, query) => {
            return new Promise((resolve, reject) => {
                $.ajax({
                    type: "GET",
                    url: url,
                    data: query,
                }).done(function (data) {
                    resolve(data);
                })
            })
        }

        $(async () => {
            const graph_data = await getRequest("graphdata", {});
            console.log(graph_data);

            chart = fdGraph(graph_data);
            $("#graph-container").html(chart);

        });
    </script>
</head>

<body>
    <div>
        <div>
            <div id="graph-container" style="height: 100vh; width: 100%; z-index: 1;"></div>
        </div>

        <div id="sidebar-container">
            <div id="sidebar">
                <div class="flex">
                    <div class="flex" style="flex-direction: column;">
                        <div id="sidebar-header">
                            <h1>Coin Die SNA</h1>
                            <span class="secondary">Social Network Analysis</span>
                        </div>
                        <div id="tab-bar" class="flex">
                            <button class="tab"><i class="fa-solid fa-circle-nodes"></i>Force Graph</button>
                            <button class="tab"><i class="fa-solid fa-map-location-dot"></i></i>Map View</button>
                            <button class="tab"><i class="fa-solid fa-chart-pie"></i>Statistics</button>
                            <button class="tab"><i class="fa-solid fa-database"></i>Analysis Data</button>
                        </div>
                    </div>
                    <div>
                        <button class="plain" id="appearance">Light mode</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="inspector-container" style="display: none;">
            <div id="inspector">
                <div class="flex">
                    <div id="inspector-header" class="flex">
                        <h3 id="inspector-heading">Inspector</h3>
                        <button class="plain" id="close-inspector" style="padding: 6px; width: 32px; height: 32px;">
                            <i class="fa-solid fa-xmark"></i>
                        </button>
                    </div>
                    <div>
                        <button class="primary">Continue</button>
                    </div>

                </div>
            </div>
        </div>

    </div>
</body>
</html>
